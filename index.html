<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FullCalendar Demo</title>
    <style>
        :root { --bg: #0b0f19; --fg: #e6e9ef; --muted: #8892a6; }
        html, body { height: 100%; margin: 0; }
        body { background: var(--bg); color: var(--fg); font: 16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
        header { display:flex; align-items:center; justify-content:space-between; padding: 14px 18px; border-bottom: 1px solid #1b2233; position: sticky; top:0; backdrop-filter: blur(6px); background: rgba(11,15,25,0.75); z-index: 10; }
        header h1 { font-size: 16px; margin: 0; letter-spacing: 0.4px; color: var(--fg); }
        header a { color: var(--muted); text-decoration: none; }
        #calendar { max-width: 1100px; margin: 18px auto; background:#0f1524; border:1px solid #1b2233; border-radius: 14px; padding: 8px; box-shadow: 0 6px 20px rgba(0,0,0,.25); }

        .fc { --fc-border-color: #1b2233; --fc-page-bg-color: #0f1524; --fc-neutral-bg-color: #101728; --fc-today-bg-color: rgba(120,162,255,.10); --fc-now-indicator-color: #ff7a7a; }
        .fc .fc-toolbar-title { color: var(--fg); font-weight: 600; }
        .fc .fc-button { background:#1a2440; border:1px solid #243057; color:#dbe4ff; text-transform: capitalize; }
        .fc .fc-button:hover { filter: brightness(1.1); }
        .fc .fc-button-primary:not(:disabled).fc-button-active, .fc .fc-button-primary:not(:disabled):active { background:#223061; border-color:#2b3b74; }
        .fc .fc-col-header-cell-cushion, .fc .fc-daygrid-day-number { color: var(--muted); }
        .fc .fc-event { border:none; }
        .toast { position: fixed; right: 16px; bottom: 16px; background:#111a2e; color:#cbd5e1; border:1px solid #1f2a44; padding:10px 12px; border-radius: 10px; opacity:0; transform: translateY(10px); transition: .2s ease; font-size: 14px; }
        .toast.show { opacity:1; transform: translateY(0); }

        .alert { border-radius: 10px; padding: 12px 14px; margin: 12px auto 0; max-width: 1100px; border: 1px solid; }
        .alert-danger { background: #2a0f12; color: #ffd1d6; border-color: #52161b; }
        .alert a { color: #ffe4e8; text-decoration: underline; }
        .hidden { display: none; }
    </style>
</head>
<body>
<header>
    <h1>FullCalendar Demo</h1>
    <a href="https://fullcalendar.io/docs" target="_blank" rel="noopener">Docs ↗</a>
</header>

<div id="tt-alert" class="alert alert-danger hidden" role="alert" aria-live="assertive">
    <strong>Can’t see the calendar?</strong> Check the browser console (DevTools → Console) for Trusted Types errors.
    <pre style="white-space:pre-wrap;margin:8px 0 0 0">index.global.min.js:6 This document requires 'TrustedHTML' assignment.
index.global.min.js:6 Uncaught TypeError: Failed to set the 'innerHTML' property on 'Element': This document requires 'TrustedHTML' assignment.</pre>
</div>

<div id="calendar"></div>
<div id="toast" class="toast">Event created. Click an event to remove it.</div>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const calendarEl = document.getElementById('calendar');
        const toast = document.getElementById('toast');

        const today = new Date();
        const y = today.getFullYear();
        const m = today.getMonth();

        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            height: 'auto',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
            },
            navLinks: true,
            nowIndicator: true,
            selectable: true,
            selectMirror: true,
            editable: true,
            dayMaxEvents: true,
            select: function(info) {
                const title = prompt('Event title:');
                if (title) {
                    calendar.addEvent({
                        title,
                        start: info.startStr,
                        end: info.endStr,
                        allDay: info.allDay
                    });
                    showToast();
                }
                calendar.unselect();
            },
            eventClick: function(info) {
                if (confirm(`Delete event "${info.event.title}"?`)) {
                    info.event.remove();
                }
            },
            events: [
                { title: 'All-day event', start: new Date(y, m, 3) },
                { title: 'Timed event', start: new Date(y, m, 7, 12, 30), end: new Date(y, m, 7, 14, 0) },
                { title: 'Meeting', start: new Date(y, m, 14, 10), end: new Date(y, m, 14, 11) },
                { title: 'Conference', start: new Date(y, m, 17), end: new Date(y, m, 19) },
                { title: 'Lunch', start: new Date(y, m, 21, 12) },
                { title: 'Happy Hour', start: new Date(y, m, 21, 17) },
                { title: 'Birthday Party', start: new Date(y, m, 23, 19), end: new Date(y, m, 23, 22) }
            ]
        });

        try {
            calendar.render();
        } catch (e) {
            const alertEl = document.getElementById('tt-alert');
            if (alertEl) alertEl.classList.remove('hidden');
            console.error('FullCalendar failed to render due to Trusted Types enforcement:', e);
        }

        function showToast() {
            toast.classList.add('show');
            clearTimeout(showToast._t);
            showToast._t = setTimeout(() => toast.classList.remove('show'), 2200);
        }
    });
</script>
</body>
</html>
